<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>Register</title>
		<meta name="author" content="Codrops" />
		<link rel="shortcut icon" href="static/favicon.png">
		<link rel="stylesheet" type="text/css" href="static/login/css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="static/login/css/demo.css" />
		<link rel="stylesheet" type="text/css" href="static/login/css/component.css" />
		<link href='http://fonts.googleapis.com/css?family=Raleway:200,400,800' rel='stylesheet' type='text/css'>
		<!--[if IE]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
		<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js">
		</script>
		<script type="text/javascript">
		  var xmlHttp;
		  function test1(){
		      var username;
		      var pwd;
		      var repwd;
		      username=document.getElementById("user").value;
		      pwd=document.getElementById("pwd").value;
		      repwd=document.getElementById("repwd").value;
		      if (username.length==0){
		          alert("Please input your username");
		          return;
		      }
		      if (pwd.length<6){
			  alert("Password length can not less than 6!");
			  return;
		      }
                      if (pwd!=repwd){
			  alert("Password and Repeat-Password are different!");
			  return;
		      }
				      /*
		      xmlHttp=GetXmlHttpObject();
                      if (xmlHttp==null){
                          alert("Browser does not support HTTP Request");
                          return;
                      }
                      var url="http://www.sjtuimap.com/Interface/register.php";
                      url = url + "?username=" + username + "&pwd=" + pwd + "&repwd=" + repwd;
                      xmlHttp.onreadystatechange=stateChanged;
                      xmlHttp.open("GET",url,true);
                      xmlHttp.send(null);
		      */
		      $.ajax({
				       url: "http://www.sjtuimap.com/Interface/register.php" + "?username=" + username + "&pwd=" + pwd + "&repwd=" + repwd,
				       type: 'GET',
				       success: function(data){
                                           if (data["info"]=="Register Successful!"){
                                              alert(data["info"]);
                                              window.location.href='http://www.sjtuimap.com/chat.html';
                                           } else if (data["info"]=="The username you input is exist!"){
                                              alert(data["info"]);
                                           }
				       }
		      });
		  }

		  function stateChanged(){ 
				       if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){ 
				       var a= xmlHttp.responseText;
				       alert(a);
				       if(a=="Register Successful!"){ 
				       window.location.href='http://www.sjtuimap.com/chat.html'; 
				       }
				       } 
				       }

		  function GetXmlHttpObject(){ 
				       var xmlHttp=null; 
				       try 
				       { 
				       // Firefox, Opera 8.0+, Safari 
				       xmlHttp=new XMLHttpRequest(); 
				       } 
				       catch(e) 
				       { 
				       // Internet Explorer 
				       try 
				       { 
				       xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); 
				       } 
				       catch (e) 
				       { 
				       xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"); 
				       } 
				       } 
				       return xmlHttp;
				       }
				       </script>

	</head>
	<body>
		<div class="container demo-1">
			<div class="content">
				<div id="large-header" class="large-header">
					<form action="" id="formOne" method="post" style="margin-top:20%;">
						<input type="text" name="usr" id="user" placeholder="User Name"/>
						<span id="user_pass"></span>
						<input type="password" name="pwd" id="pwd" placeholder="Your Password"/>
						<span id="pwd_pass"></span>
						<input type="password" name="rpwd" id="repwd" placeholder="Repeat Your Password">
						<input type="button" name="submit" id="submits" value="Register" onclick="test1()">
					</form>
					
					<canvas id="demo-canvas"></canvas>
					<h1 class="main-title"><a href="./map.html">SJTU <span class="thin">Software</a></span></h1>
				</div>
			</div>
		</div><!-- /container -->
		<script src="static/login/js/TweenLite.min.js"></script>
		<script src="static/login/js/EasePack.min.js"></script>
		<script src="static/login/js/rAF.js"></script>
		<script src="static/login/js/demo-1.js"></script>
	</body>
</html>
